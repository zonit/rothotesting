doctype html
html(lang=locale)
  head
    block meta
      meta(charset="utf-8")
      meta(http-equiv="x-ua-compatible", content="ie=edge")
      title= meta.title
      meta(name="description", content=meta.description)
      meta(name="viewport", content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no")

      //- languages supported
      //- <https://support.google.com/webmasters/answer/189077?hl=en>
      //- <https://support.google.com/webmasters/answer/182192?hl=en>
      link(rel="alternate", href=`${config.urls.web}${ctx.pathWithoutLocale}`, hreflang="x-default")
      each language in availableLanguages
        link(rel="alternate", href=`${config.urls.web}/${language.locale}${ctx.pathWithoutLocale}`, hreflang=language.locale)

      //- generated with https://realfavicongenerator.net
      link(rel="apple-touch-icon", sizes="152x152", href=manifest('img/apple-touch-icon.png'))
      link(rel="icon", type="image/png", href=manifest('img/favicon-32x32.png'), sizes="32x32")
      link(rel="icon", type="image/png", href=manifest('img/favicon-16x16.png'), sizes="16x16")
      link(rel="manifest", href="/manifest.json")

      //- add mask-icon
      //- <https://goo.gl/PMBfKu>
      //- link(rel="mask-icon", href=manifest('img/safari-pinned-tab.svg'), color=config.appColor)
      meta(name="apple-mobile-web-app-title", content=config.appName)
      meta(name="application-name", content=config.appName)
      meta(name="theme-color", content=config.appColor)

      //- csrf token
      meta(name="csrf-token", content=ctx.csrf)
      script.
        window._csrf = "#{ctx.csrf}";

    //- add opengraph tags to your structured data pages
    block opengraph
      link(rel='image_src', type='image/png', href=manifest('img/social.png'))
      meta(property='og:title', content=meta.title)
      meta(property='og:url', content=`${config.urls.web}${ctx.pathWithoutLocale}`)
      meta(property='og:description', content=meta.description)
      meta(property='og:image', content=`${config.urls.web}/img/social.png`)
      meta(name='twitter:card', content='summary_large_image')
      meta(name='twitter:site', content=config.twitter)
      meta(name='twitter:title', content=meta.title)
      meta(name='twitter:description', content=meta.description)
      meta(name='twitter:image:src', content=`${config.urls.web}/img/twitter.png`)

    block fonts
      link(href='https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800%7COpen+Sans:400,700,800' rel='stylesheet' type='text/css')

    //- css file
    block vendorStylesheets
      link(rel="stylesheet", href=manifest('vendor/bootstrap/css/bootstrap.min.css'))
      link(rel="stylesheet", href=manifest('vendor/fontawesome-free/css/all.min.css'))
      link(rel="stylesheet", href=manifest('vendor/animate/animate.min.css'))
      link(rel="stylesheet", href=manifest('vendor/simple-line-icons/css/simple-line-icons.min.css'))
      link(rel="stylesheet", href=manifest('vendor/owl.carousel/assets/owl.carousel.min.css'))
      link(rel="stylesheet", href=manifest('vendor/owl.carousel/assets/owl.theme.default.css'))
      link(rel="stylesheet", href=manifest('vendor/magnific-popup/magnific-popup.min.css'))
      link(rel='stylesheet' href=manifest('vendor/rs-plugin/css/settings.css'))
      link(rel='stylesheet' href=manifest('vendor/rs-plugin/css/layers.css'))
      link(rel='stylesheet' href=manifest('vendor/rs-plugin/css/navigation.css'))
      link(rel='stylesheet' href=manifest('vendor/circle-flip-slideshow/css/component.css'))
    block themeStylesheets
      link(rel="stylesheet", href=manifest('css/theme.css'))
      link(rel="stylesheet", href=manifest('css/theme-elements.css'))
      link(rel="stylesheet", href=manifest('css/theme-blog.css'))
      link(rel="stylesheet", href=manifest('css/theme-shop.css'))
      link(rel="stylesheet", href=manifest('css/custom.css'))
      link(rel='stylesheet', href=manifest('css/demos/demo-business-consulting.css'))
      link(rel='stylesheet', href=manifest('css/skins/skin-business-consulting.css'))
    block headScripts
      script(defer, src=manifest('vendor/modernizr/modernizr.min.js'))
      //- flash messaging (with koa-better-flash and sweetalert2)
      script.
        window._types = {
          success: "#{ t('Success') }",
          error: "#{ t('Error') }",
          info: "#{ t('Info') }",
          warning: "#{ t('Warning') }",
          question: "#{ t('Question') }"
        };
        window._messages = !{json(flash(), null, null)};

      //- set defaults for sweetalert2
      //- <https://github.com/limonte/sweetalert2/issues/763>
      script.
        window._swalDefaults = {
          confirmButtonText: "#{ t('OK') }",
          cancelButtonText: "#{ t('Cancel') }",
          closeButtonAriaLabel: "#{ t('Close this dialog') }",
          reverseButtons: true
        };

      //- set defaults for confirm prompt sweetalert2 modal
      script.
        window._confirmPromptTitle = "#{ t('Are you sure?') }";
        window._confirmPromptHTML = "#{ t('Please confirm if you wish to continue.') }";

      //- set the locale to be used by front-end assets
      script.
        window.LOCALE = "#{locale}";

      //- set the API endpoint to be used by front-end assets
      script.
        window.API_URL = "#{config.urls.api}";

      //- set the user and API key to be used by CabinJS
      if user
        script.
          window.USER = {
            id: "#{user.id}",
            name: "#{user[config.passport.fields.displayName]}",
            email: "#{user.email}"
          };
          window.API_TOKEN = "#{user[config.userFields.apiToken]}";
      else
        script.
          window.USER = {
            id: "#{ctx.sessionId}"
          };

      //- polyfill environment
      script(defer, src=`https://polyfill.io/v3/polyfill${config.env === 'production' ? '.min' : ''}.js?features=${polyfills.join(',')}`)

      //- factor bundle (common shared assets across all files)
      script(defer, src=manifest('js/factor-bundle.js'))

      //- uncaught (handles errors, similar to TraceKit but with CabinJS + StackTrace.JS)
      script(defer, src=manifest('js/uncaught.js'))

      //- scripts
      script(defer, src=manifest('js/core.js'))

  body
    .body
      //- navigation
      block navigation
        include partials/_header

      //- body

      block body

      //- footer
      block footer
        include partials/_footer

    block bodyScripts
      // Vendor
      script(defer, src=manifest('vendor/jquery/jquery.min.js'))
      script(defer, src=manifest('vendor/jquery.appear/jquery.appear.min.js'))
      script(defer, src=manifest('vendor/jquery.easing/jquery.easing.min.js'))
      script(defer, src=manifest('vendor/jquery.cookie/jquery.cookie.min.js'))
      script(defer, src=manifest('vendor/popper/umd/popper.min.js'))
      script(defer, src=manifest('vendor/bootstrap/js/bootstrap.min.js'))
      script(defer, src=manifest('vendor/common/common.min.js'))
      script(defer, src=manifest('vendor/jquery.validation/jquery.validate.min.js'))
      script(defer, src=manifest('vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js'))
      script(defer, src=manifest('vendor/jquery.gmap/jquery.gmap.min.js'))
      script(defer, src=manifest('vendor/jquery.lazyload/jquery.lazyload.min.js'))
      script(defer, src=manifest('vendor/isotope/jquery.isotope.min.js'))
      script(defer, src=manifest('vendor/owl.carousel/owl.carousel.min.js'))
      script(defer, src=manifest('vendor/magnific-popup/jquery.magnific-popup.min.js'))
      script(defer, src=manifest('vendor/vide/jquery.vide.min.js'))
      script(defer, src=manifest('vendor/vivus/vivus.min.js'))
      //Revoultion Slider plugin scripts
      script(defer, src=manifest('vendor/rs-plugin/js/jquery.themepunch.tools.min.js'))
      script(defer, src=manifest('vendor/rs-plugin/js/jquery.themepunch.revolution.min.js'))
      // Theme Base, Components and Settings
      script(defer, src=manifest('cjs/theme.js'))
      // Theme Custom
      script(defer, src=manifest('cjs/custom.js'))
      script(defer, src=manifest('cjs/demos/demo-business-consulting.js'))
      // Theme Initialization Files
      script(defer, src=manifest('cjs/theme.init.js'))


